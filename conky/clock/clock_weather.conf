# By Jesse_Avalos , See me on Eye Candy Linux_  on Google +
background yes
use_xft yes
xftfont Roboto:size=9
xftalpha 0.8
update_interval 1
total_run_times 0
own_window yes
own_window_transparent yes
imlib_cache_size 0
##############################################
# Compositing tips:
# Conky can play strangely when used with
# different compositors. I have found the
# following to work well, but your mileage
# may vary. Comment/uncomment to suit.
##############################################
## no compositor
#own_window_type dock
#own_window_argb_visual no

## xcompmgr
#own_window_type override
#own_window_argb_visual yes

## cairo-compmgr
own_window_type desktop
own_window_argb_visual yes
##############################################
own_window_hints undecorated,below,sticky,skip_taskbar,skip_pager
double_buffer yes
draw_shades no
draw_outline no
draw_borders no
draw_graph_borders no
stippled_borders 0
border_margin 5
border_width 1
default_color white
default_shade_color 000000
default_outline_color 000000
alignment bottom_middle
minimum_size 600 460
maximum_width 900
gap_x -80
gap_y 200
no_buffers yes
uppercase no
cpu_avg_samples 2
net_avg_samples 2
short_units yes
text_buffer_size 2048
use_spacer none
override_utf8_locale yes
color1 212021
color2 E8E1E6
color3 E82A2A
own_window_argb_value 0
own_window_colour 000000

lua_load ~/.fvwm/conky/clock/clock_rings.lua
lua_draw_hook_pre clock_rings
TEXT
\
# --- Weather --- #
###################
\
# --- WOEID (Location id) --- #
${texeci 300 curl -s "https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20%3D%202141166%20and%20u%3D'C'&format=xml&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys" -o ~/.fvwm/tmp/weather.xml}\
\
# --- Temperature --- #
#######################
${voffset 50}
${font ADELE :pixelsize=30}${color 00ff00}${offset 365}${voffset 10}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "temp=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}°${font ADELE :pixelsize=15}C
\
# --- Weather icon --- #
########################
\
${execi 300 cp -f outlineW/$(grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "code=\"[^\"]*\"" | grep -o "\"[^\"]*\"" |grep -o "[^\"]*"|awk 'FNR==2{print $0}').png ~/.fvwm/tmp/weather-1.png}${image ~/.fvwm/tmp/weather-1.png -p 410,0 -s 80x80}
\
# --- Textual condition (e.g. Partly cloudy) --- #
##################################################
\
${font Roboto Light:pixelsize=18}${voffset -20}${offset 462}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "text=\"[^\"]*\"" | grep -o "\"[^\"]*\"" |grep -o "[^\"]*" | head -n 1}
\
# --- Icon - high temperature --- #
####################################
\
# --- High temperature --- #
############################
\
${voffset 15}
${font Roboto Light:pixelsize=12}${offset 390}${voffset -35}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "high=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==1'}°/${font Roboto Light :pixelsize=12}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "low=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==1'}°
${font Roboto Light:pixelsize=12}${offset 460}${execi 300 grep "yweather:location" ~/.fvwm/tmp/weather.xml | grep -o "city=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}
${font Roboto Light:pixelsize=12}${offset 410}${execi 300 grep "yweather:location" ~/.fvwm/tmp/weather.xml | grep -o "country=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*"}
\
${font Roboto Light:pixelsize=11}${offset 515}${voffset 25}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "high=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==2'}°
${font Roboto Light:pixelsize=10}${offset 480}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "low=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==2'}°
\
${font Roboto Light:pixelsize=9}${offset 355}${voffset 25}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "high=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==3'}°
${font Roboto Light:pixelsize=9}${offset 320}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "low=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==3'}°
\
${font Roboto Light:pixelsize=9}${offset 490}${voffset -5}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "high=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==4'}°
${font Roboto Light:pixelsize=9}${offset 437}${execi 300 grep "yweather:forecast" ~/.fvwm/tmp/weather.xml | grep -o "low=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | awk 'NR==4'}°
\
${offset 413}${voffset -80}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "date=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | head -n 1 | sed -e 's/.*\([0-9]\{2\}\):\([0-9]\{2\}\).*$/\1/'}${offset 20}${voffset -10}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "date=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | head -n 1 | sed -e 's/.*\([0-9]\{2\}\):\([0-9]\{2\}\).*$/\2/'}
${font Roboto Light:pixelsize=8}${offset 410}${voffset 40}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "date=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | head -n 1 | sed -e 's/\(.*\),.*$/\1/'}
${offset 360}${voffset 20}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "date=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | head -n 1 | sed -e 's/.*[0-9]\{2\}\s\(.*\)\s[0-9]\{4\}.*$/\1/'}
${font Roboto Light:pixelsize=6}${offset 388}${voffset -15}${execi 300 grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "date=\"[^\"]*\"" | grep -o "\"[^\"]*\"" | grep -o "[^\"]*" | head -n 1 |sed -e 's/.*,\s\([0-9]\{2\}\)\s.*$/\1/'}
\
# --- forecast -- #
############################
${execi 300 cp -f outlineW/$(grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "code=\"[^\"]*\"" | grep -o "\"[^\"]*\"" |grep -o "[^\"]*"|awk 'FNR==1{print $0}').png ~/.fvwm/tmp/weather-2.png}${image ~/.fvwm/tmp/weather-2.png -p 362,348 -s 20x20}
${execi 300 cp -f outlineW/$(grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "code=\"[^\"]*\"" | grep -o "\"[^\"]*\"" |grep -o "[^\"]*"|awk 'FNR==3{print $0}').png ~/.fvwm/tmp/weather-3.png}${image ~/.fvwm/tmp/weather-3.png -p 505,135 -s 60x60}
${execi 300 cp -f outlineW/$(grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "code=\"[^\"]*\"" | grep -o "\"[^\"]*\"" |grep -o "[^\"]*"|awk 'FNR==4{print $0}').png ~/.fvwm/tmp/weather-4.png}${image ~/.fvwm/tmp/weather-4.png -p 336,210 -s 40x40}
${execi 300 cp -f outlineW/$(grep "yweather:condition" ~/.fvwm/tmp/weather.xml | grep -o "code=\"[^\"]*\"" | grep -o "\"[^\"]*\"" |grep -o "[^\"]*"|awk 'FNR==5{print $0}').png ~/.fvwm/tmp/weather-5.png}${image ~/.fvwm/tmp/weather-5.png -p 493,235 -s 40x40}
